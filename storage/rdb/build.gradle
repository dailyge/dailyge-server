dependencies {
    // JPA
    api("org.springframework.boot:spring-boot-starter-data-jpa")

    // MySQL
    runtimeOnly("mysql:mysql-connector-java:${property("mysqlVersion")}")
}

def querydslDir = "$buildDir/generated/querydsl"

sourceSets {
    main.java.srcDirs += [querydslDir]
}

tasks.withType(JavaCompile).configureEach {
    options.annotationProcessorPath = configurations.annotationProcessor
    options.compilerArgs += ["-s", "${project.layout.buildDirectory}/generated/sources/annotationProcessor/java/main"]
}

clean.doLast {
    file(querydslDir).deleteDir()
}
